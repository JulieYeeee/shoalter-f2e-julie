(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[951],{5231:function(e,t,i){Promise.resolve().then(i.bind(i,761))},761:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return z}});var n=i(7437),r=i(9379),o=i(2265),l=i(5621),a=i(1357),s=i(2695);let c=(0,r.zo)(a.Z).withConfig({componentId:"sc-3cf0c731-0"})([".ant-card-body{width:125px;}.ant-card-cover{display:flex;justify-content:center;align-items:center;> :first-child{border-radius:16px;}}.ant-card-meta-title{font-weight:500;font-size:14px;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden;word-break:break-all;white-space:wrap;text-overflow:clip;min-height:2em;line-height:1em;overflow:hidden;}"]);var d=function(e){let{src:t,title:i,description:r}=e;return(0,n.jsx)(c,{cover:(0,n.jsx)(s.C,{shape:"square",size:64,alt:i,src:t}),children:(0,n.jsx)(a.Z.Meta,{title:i,description:r})})},u=i(1255),f=i(8575);let p=f.I0.withTypes(),h=f.v9.withTypes();f.oR.withTypes();let m=r.zo.div.withConfig({componentId:"sc-8121b301-0"})(["width:100%;overflow-x:auto;"]),v=(0,r.zo)(l.Z).withConfig({componentId:"sc-8121b301-1"})([".ant-list-items{width:100%;display:flex;flex-direction:row;}"]);var w=function(){let e=p(),{result:t}=h(u.CY),i=0===t.length;return(0,o.useEffect)(()=>{e((0,u.i_)())},[e]),(0,n.jsxs)("div",{children:[(0,n.jsx)("h1",{children:"推薦"}),(0,n.jsx)(m,{children:(0,n.jsx)(v,{loading:i,dataSource:t,renderItem:e=>{var t;return(0,n.jsx)(l.Z.Item,{children:(0,n.jsx)(d,{src:null==e?void 0:null===(t=e["im:image"][2])||void 0===t?void 0:t.label,title:null==e?void 0:e["im:name"].label,description:null==e?void 0:e.category.attributes.label})})}})})]})},y=function(){let{result:e}=h(u.sO),t=p(),i=0===e.length;return(0,o.useEffect)(()=>{t((0,u.wq)())},[t]),(0,n.jsx)(l.Z,{pagination:{position:"bottom",align:"center",pageSize:10},dataSource:e,loading:i,renderItem:e=>{var t;return(0,n.jsx)(l.Z.Item,{children:(0,n.jsx)(l.Z.Item.Meta,{avatar:(0,n.jsx)(s.C,{src:null==e?void 0:null===(t=e["im:image"][0])||void 0===t?void 0:t.label,size:64,alt:e["im:name"].label}),title:e["im:name"].label,description:e.category.attributes.label})},null==e?void 0:e.id.attributes["im:id"])}})},x=i(9436),g=i(9641),b=i(666);let j=(0,r.zo)(g.Z.Item).withConfig({componentId:"sc-57c256e3-0"})(["margin-bottom:0;"]),R=(0,r.zo)(b.Z).withConfig({componentId:"sc-57c256e3-1"})(["background-color:#d1d1d1;&::placeholder{color:red;text-align:center;}.ant-input-affix-wrapper{position:relative;}.ant-input-prefix{position:absolute;left:50%;transform:translateX(-50%);color:#bfbfbf;visibility:",";}"],e=>e.$isSearch?"hidden":"visible");var k=function(){let e=p(),[t]=g.Z.useForm(),i=g.Z.useWatch("keyword",t),[r,l]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{i&&i.trim()?e((0,u.kG)(i)):e((0,u.kG)(""))},[e,i]),(0,n.jsx)(g.Z,{form:t,layout:"vertical",autoComplete:"off",children:(0,n.jsx)(j,{name:"keyword",children:(0,n.jsx)(R,{$isSearch:r||!!i,onFocus:()=>l(!0),onBlur:()=>l(!1),prefix:(0,n.jsxs)("div",{children:[(0,n.jsx)(x.Z,{}),(0,n.jsx)("span",{children:"搜尋"})]})})})})};let C=r.zo.div.withConfig({componentId:"sc-1fa8ffd7-0"})(["width:100vw;height:100vh;overflow-y:auto;display:flex;justify-content:center;"]),I=r.zo.div.withConfig({componentId:"sc-1fa8ffd7-1"})(["width:50%;"]),Z=r.zo.div.withConfig({componentId:"sc-1fa8ffd7-2"})(["position:sticky;top:0;z-index:10;background-color:#f5f5f5;padding:8px;border-bottom:1px solid lightgray;height:fit-content;"]);var z=function(){return(0,n.jsx)(C,{children:(0,n.jsxs)(I,{children:[(0,n.jsx)(Z,{children:(0,n.jsx)(k,{})}),(0,n.jsx)(w,{}),(0,n.jsx)(y,{})]})})}},8705:function(e,t,i){"use strict";i.d(t,{R:function(){return n}});let n="searchResult"},1255:function(e,t,i){"use strict";i.d(t,{CY:function(){return u},V1:function(){return p},i_:function(){return s},kG:function(){return f},sO:function(){return d},wq:function(){return a}});var n=i(1455),r=i(2713),o=i(3464),l=i(8705);let a=(0,n.hg)("".concat(l.R,"/getSearchResult"),async(e,t)=>{let{rejectWithValue:i}=t;try{return(await (0,o.Z)({method:"get",url:"https://itunes.apple.com/tw/rss/topfreeapplications/limit=100/json",responseType:"json"})).data.feed}catch(e){return i(e)}}),s=(0,n.hg)("".concat(l.R,"/getRecommendation"),async(e,t)=>{let{rejectWithValue:i}=t;try{return(await (0,o.Z)({method:"get",url:"https://itunes.apple.com/tw/rss/topgrossingapplications/limit=10/json",responseType:"json"})).data.feed}catch(e){return i(e)}}),c=(0,n.oM)({name:"searchResult",initialState:{searchResultRsp:null,recommendationRsp:null,keyword:null},reducers:{updateKeyword:(e,t)=>{e.keyword=t.payload}},extraReducers:e=>{e.addMatcher(e=>e.type===a.fulfilled.type||e.type===a.rejected.type,(e,t)=>{e.searchResultRsp=t.payload}),e.addMatcher(e=>e.type===s.fulfilled.type||e.type===s.rejected.type,(e,t)=>{e.recommendationRsp=t.payload})}}),d=(0,r.P1)(e=>{var t,i;return null===(i=e[l.R])||void 0===i?void 0:null===(t=i.searchResultRsp)||void 0===t?void 0:t.entry},e=>{var t;return null===(t=e[l.R])||void 0===t?void 0:t.keyword},(e,t)=>{if(!t)return{isKeyword:!1,result:e||[]};let i=t.toLowerCase(),n=e=>e.toLowerCase().includes(i);return{isKeyword:!0,result:e.filter(e=>n(e["im:name"].label)||n(e.summary.label)||n(e.title.label))}}),u=(0,r.P1)(e=>{var t,i;return null===(i=e[l.R])||void 0===i?void 0:null===(t=i.recommendationRsp)||void 0===t?void 0:t.entry},d,(e,t)=>{let{isKeyword:i,result:n}=t;return{result:i?n:e||[]}}),{updateKeyword:f}=c.actions,p=c.reducer}},function(e){e.O(0,[326,395,971,117,744],function(){return e(e.s=5231)}),_N_E=e.O()}]);